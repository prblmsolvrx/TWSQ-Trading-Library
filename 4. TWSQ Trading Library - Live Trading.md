# Live Trading

The TWSQ Trading Library supports live trading of your strategies on cryptocurrency exchanges. Currently, live trading is implemented for Kraken.

## Setting Up Live Trading

### 1. Configure Settings File

Create a `settings.yml` file in your `MyTWSQ` folder with your API credentials:

```yaml
exchange_apis:
  Kraken:
    key: your_api_key_here
    secret: your_api_secret_here
```

### 2. Launch Live Trading

Use the `run_live` method to start live trading:

```python
ETHDCA.run_live()
```

## Live Trading Parameters

The `run_live` method accepts several parameters:

- `freq`: Rebalance frequency (default is '1h')
- `name`: Name of the trading session (used for logging and saving results)

Example with custom parameters:

```python
ETHDCA.run_live(freq='30m', name='ETHDCA_Live_30m')
```

## Rebalance Frequency

You can set the rebalance frequency in two ways:

1. Use preset frequencies: '1m', '5m', '15m', '30m', '1h', '4h', '1d'
   - Rebalancing occurs at bar start times
2. Specify a float value for the number of seconds between rebalances
   - Rebalancing occurs immediately and then every `freq` seconds

## Exchange API Usage

The trader uses a combination of REST and WebSocket APIs:

- WebSocket: Used for real-time price data and order updates
- REST: Used for submitting orders

## Exiting Live Trading

To exit live trading, use a keyboard interruption (CTRL+C). The `on_exit` function will be called before the trader exits.

## Output

Live trading results are saved in `MyTWSQ/alphas/{strategy_name}/live_trading/broker/`:

1. `logs/`: Contains timestamped log files
2. `pos_pnl.csv`: Contains positions and PnL information
3. `orders.csv`: Contains all order information

These files maintain continuity across trading sessions for the same strategy.

## Position Tracking

Strategy positions are maintained across trading sessions. If you restart a trading session with the same strategy name, it will load the previous positions from the `pos_pnl.csv` file.

## Telegram Logging

You can set up Telegram logging to receive mobile notifications about your live trader:

1. Create a Telegram bot using BotFather
2. Obtain your `token` and `chat_id`
3. Add these to your `settings.yml` file:

```yaml
telegram:
    token: your_token_here
    chat_id: your_chat_id_here
```

This will send all logging information to your Telegram bot.

## Considerations for Live Trading

1. Ensure your strategy is well-tested in backtests before live trading
2. Be aware of exchange rate limits for API calls
3. Monitor your strategy regularly, especially in the initial stages
4. Use appropriate risk management techniques
5. Be prepared for potential connectivity issues or exchange downtime

This live trading guide provides a comprehensive overview of how to use the live trading capabilities of the TWSQ Trading Library. It covers setting up live trading, understanding the live trading process, and managing your live trading sessions.